"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8114],{8114:(O,m,a)=>{a.r(m),a.d(m,{ViewHuespedPageModule:()=>P});var d=a(6895),c=a(4006),o=a(1082),p=a(4074),f=a(655),e=a(4650),_=a(9588);function b(i,s){1&i&&(e.TgZ(0,"ion-chip",39)(1,"ion-label"),e._uU(2),e.qZA()()),2&i&&(e.Q6J("outline",!0),e.xp6(2),e.Oqu("Airbnb"))}function Z(i,s){1&i&&(e.TgZ(0,"ion-chip",40)(1,"ion-label"),e._uU(2),e.qZA()()),2&i&&(e.Q6J("outline",!0),e.xp6(2),e.Oqu("Directo"))}function x(i,s){if(1&i&&(e.TgZ(0,"ion-chip",41)(1,"ion-avatar",42),e._UZ(2,"img",43),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.Q6J("outline",!0),e.xp6(4),e.Oqu(t.room)}}function A(i,s){if(1&i&&(e.TgZ(0,"ion-chip",44)(1,"ion-avatar",42),e._UZ(2,"img",45),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.Q6J("outline",!0),e.xp6(4),e.Oqu(t.room)}}function w(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"ion-grid",47)(2,"ion-row")(3,"ion-col",48)(4,"div",49),e._uU(5),e.ALo(6,"currency"),e.qZA()(),e.TgZ(7,"ion-col",48)(8,"div",50),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"ion-button",51),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,l=e.oxw();return e.KtG(l.pay(r))}),e._UZ(12,"ion-icon",52),e.qZA()(),e.TgZ(13,"ion-col",48)(14,"div",53),e._uU(15),e.ALo(16,"currency"),e.qZA()()()()()}if(2&i){const t=e.oxw().$implicit;e.xp6(5),e.hij(" ",e.lcZ(6,3,t.price)," "),e.xp6(4),e.hij(" -",e.lcZ(10,5,t.advance)," "),e.xp6(6),e.hij(" ",e.lcZ(16,7,t.price-t.advance)," ")}}function y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ion-card",14)(1,"ion-card-header",15)(2,"ion-card-title",16),e._uU(3),e.ALo(4,"uppercase"),e.qZA(),e.TgZ(5,"ion-card-subtitle",17),e.YNc(6,b,3,2,"ion-chip",18),e.YNc(7,Z,3,2,"ion-chip",19),e.YNc(8,x,5,2,"ion-chip",20),e.YNc(9,A,5,2,"ion-chip",21),e.qZA()(),e.TgZ(10,"ion-card-content",22)(11,"ion-row")(12,"ion-col",23)(13,"ion-card",24)(14,"ion-card-header",25)(15,"ion-card-subtitle"),e._uU(16),e.qZA(),e.TgZ(17,"ion-card-title",26),e._uU(18),e.qZA()()()(),e.TgZ(19,"ion-col",23)(20,"ion-card",24)(21,"ion-card-header",25)(22,"ion-card-subtitle"),e._uU(23),e.qZA(),e.TgZ(24,"ion-card-title",26),e._uU(25),e.qZA()()()()(),e.TgZ(26,"div",27)(27,"a",28)(28,"ion-chip",29),e._UZ(29,"ion-icon",30),e.TgZ(30,"ion-label"),e._uU(31,"Info "),e.qZA(),e._UZ(32,"ion-icon",31),e.qZA()(),e.TgZ(33,"a",32)(34,"ion-chip",29),e._UZ(35,"ion-icon",33),e.TgZ(36,"ion-label"),e._uU(37,"Perfil "),e.qZA()()(),e.TgZ(38,"a",28)(39,"ion-chip",29),e._UZ(40,"ion-icon",34),e.qZA()(),e.TgZ(41,"ion-button",35),e.NdJ("click",function(){const l=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.removeHuesped(l.token))}),e._UZ(42,"ion-icon",36),e.qZA()()(),e._UZ(43,"hr",37),e.YNc(44,w,17,9,"div",38),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,19,t.name.split(" ")[0])),e.xp6(3),e.Q6J("ngIf","airbnb"==t.platform),e.xp6(1),e.Q6J("ngIf","direct"==t.platform),e.xp6(1),e.Q6J("ngIf","Le\xf3n"==t.room),e.xp6(1),e.Q6J("ngIf","Elefante"==t.room),e.xp6(7),e.AsE("",n.getMonthName(t.dateAdmission),""," '"+t.departureDate.substring(2,4),""),e.xp6(2),e.Oqu(t.dateAdmission.substring(8,10)),e.xp6(5),e.AsE("",n.getMonthName(t.dateAdmission),""," '"+t.departureDate.substring(2,4),""),e.xp6(2),e.Oqu(t.departureDate.substring(8,10)),e.xp6(2),e.hYB("href","https://wa.me/",t.phone,"?text=","Hola "+t.name+" "+n.message+t.token,"",e.LSH),e.xp6(1),e.Q6J("outline",!0),e.xp6(5),e.MGl("href","/?token=",t.token,"",e.LSH),e.xp6(1),e.Q6J("outline",!0),e.xp6(4),e.MGl("href","https://wa.me/",t.phone,"",e.LSH),e.xp6(1),e.Q6J("outline",!0),e.xp6(5),e.Q6J("ngIf","direct"===t.platform)}}const v=[{path:"",component:(()=>{class i{constructor(t,n,r,l){this.huespedService=t,this.alertController=n,this.router=r,this.fb=l,this.handlerMessage="",this.roleMessage="",this.message="Gracias por tu reservaci\xf3n, para ver m\xe1s detalles ingresa a https://villaernestina-52a85.web.app/login?token=",this.huespedService.getHuespeds().subscribe(g=>{this.huespeds=g;let u=new Date;u.setMinutes(u.getMinutes()-u.getTimezoneOffset());let T=u.toISOString().substring(0,19)+"-00:00";this.huespedsFilter=this.huespeds.filter(h=>h.dateAdmission>=T),this.huespedsFilter.sort((h,C)=>h.dateAdmission.localeCompare(C.dateAdmission))})}ngOnInit(){this.myForm=this.fb.group({filter:["dateAdmission"]}),this.myForm.get("filter").valueChanges.subscribe(t=>{switch(t){case"all":this.all();break;case"dateAdmission":this.filterByDateAdmission();break;case"lion":this.filterByLionRoom();break;case"elephant":this.filterByElephantRoom()}})}removeHuesped(t){return(0,f.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({header:"\xbfDesea eliminar?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{this.handlerMessage="Eliminaci\xf3n cancelada"}},{text:"OK",role:"confirm",handler:()=>{this.huespedService.removeHuesped(t),this.handlerMessage="Eliminado"}}]});yield n.present();const{role:r}=yield n.onDidDismiss();this.roleMessage=`Dismissed with role: ${r}`})}getMonthName(t){let n=t.substring(5,7);switch(n){case"01":return"Enero";case"02":return"Febrero";case"03":return"Marzo";case"04":return"Abril";case"05":return"Mayo";case"06":return"Junio";case"07":return"Julio";case"08":return"Agosto";case"09":return"Septiembre";case"10":return"Octubre";case"11":return"Noviembre";case"12":return"Diciembre"}return n}newHuesped(){this.router.navigate(["/new-huesped"])}filterByAll(){this.huespedService.getHuespeds().subscribe(t=>{this.huespeds=t,this.huespedsFilter=this.huespeds,this.huespedsFilter.sort((n,r)=>n.dateAdmission.localeCompare(r.dateAdmission))})}filter(){this.myForm.get("filter").valueChanges.subscribe(t=>{switch(t){case"dateAdmission":this.filterByDateAdmission();break;case"process":this.filterByProcess();break;case"all":this.filterByAll();break;case"lion":this.filterByLionRoom();break;case"elephant":this.filterByElephantRoom()}})}all(){this.huespedsFilter=this.huespeds}filterByProcess(){let t=new Date;console.log(t),t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),console.log(t.toISOString());let n=t.toISOString().substring(0,19)+"-00:00";console.log(n),this.huespedsFilter=this.huespeds.filter(r=>r.dateAdmission<=n&&r.departureDate>=n)}filterByDateAdmission(){let t=new Date;t.setMinutes(t.getMinutes()-t.getTimezoneOffset());let n=t.toISOString().substring(0,19)+"-00:00";this.huespedsFilter=this.huespeds.filter(r=>r.dateAdmission>=n)}filterByLionRoom(){this.huespedsFilter=this.huespeds.filter(t=>"Le\xf3n"===t.room)}filterByElephantRoom(){this.huespedsFilter=this.huespeds.filter(t=>"Elefante"===t.room)}search(t){const n=t.target.value.toLowerCase();n&&"undefined"!==n&&""!==n?this.huespedsFilter=this.huespeds.filter(r=>r.name.split(" ")[0].toLowerCase().includes(n.toLowerCase())):this.all()}pay(t){return(0,f.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({header:"\xbfDesea registrar el pago?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{this.handlerMessage="Eliminaci\xf3n cancelada"}},{text:"OK",role:"confirm",handler:()=>{this.huespedService.updatePay(t),this.handlerMessage="Actualizado"}}]});yield n.present();const{role:r}=yield n.onDidDismiss();this.roleMessage=`Dismissed with role: ${r}`})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.l),e.Y36(o.Br),e.Y36(p.F0),e.Y36(c.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-huesped"]],decls:23,vars:2,consts:[["slot","start"],["show-clear-button","always","animated","true","placeholder","Hu\xe9sped",3,"ionChange"],[1,"back"],[3,"formGroup"],["interface","popover","formControlName","filter","placeholder","Mostrar por:","value","dateAdmission",3,"click"],["value","dateAdmission"],["value","process"],["value","lion"],["value","elephant"],["value","all"],["class","card",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],[1,"card"],[1,"header-card"],[1,"title-card"],[1,"subtitle-card"],["class","chip-card airbnb",3,"outline",4,"ngIf"],["color","primary",3,"outline",4,"ngIf"],["color","warning","class","chip-card",3,"outline",4,"ngIf"],["color","primary","class","chip-card",3,"outline",4,"ngIf"],[1,"card-content"],["size","6",1,"card-col"],[1,"check"],[1,"header-day"],[1,"day"],[1,"text-center"],["target","_blank",3,"href"],[3,"outline"],["name","logo-whatsapp","color","success"],["name","send","color","primary"],[3,"href"],["name","person-circle"],["name","logo-whatsapp","color","success",1,"icon-center"],["fill","clear",3,"click"],["name","trash-outline","color","danger"],[1,"divider"],["class","prices",4,"ngIf"],[1,"chip-card","airbnb",3,"outline"],["color","primary",3,"outline"],["color","warning",1,"chip-card",3,"outline"],["color","light"],["alt","image of leon","src","../../assets/img/leon.png"],["color","primary",1,"chip-card",3,"outline"],["alt","image of elephant","src","../../assets/img/elefante.png"],[1,"prices"],["fixed",""],["size","4",1,"ion-text-center"],[1,"price"],[1,"advance"],["color","success","shape","round",3,"click"],["name","checkmark-done-circle"],[1,"rest"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-searchbar",1),e.NdJ("ionChange",function(l){return n.search(l)}),e.qZA()()(),e.TgZ(5,"ion-content",2)(6,"form",3)(7,"ion-item")(8,"ion-select",4),e.NdJ("click",function(){return n.filter()}),e.TgZ(9,"ion-select-option",5),e._uU(10,"Pr\xf3ximos"),e.qZA(),e.TgZ(11,"ion-select-option",6),e._uU(12,"En proceso"),e.qZA(),e.TgZ(13,"ion-select-option",7),e._uU(14,"Le\xf3n"),e.qZA(),e.TgZ(15,"ion-select-option",8),e._uU(16,"Elefante"),e.qZA(),e.TgZ(17,"ion-select-option",9),e._uU(18,"Todos"),e.qZA()()()(),e.YNc(19,y,45,21,"ion-card",10),e.TgZ(20,"ion-fab",11)(21,"ion-fab-button",12),e.NdJ("click",function(){return n.newHuesped()}),e._UZ(22,"ion-icon",13),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",n.myForm),e.xp6(13),e.Q6J("ngForOf",n.huespedsFilter))},dependencies:[d.sg,d.O5,c._Y,c.JJ,c.JL,c.sg,c.u,o.BJ,o.oU,o.YG,o.Sm,o.PM,o.FN,o.Zi,o.tO,o.Dq,o.hM,o.wI,o.W2,o.IJ,o.W4,o.jY,o.Gu,o.gu,o.Ie,o.Q$,o.Nd,o.VI,o.t9,o.n0,o.sr,o.QI,o.j9,o.cs,d.gd,d.H9],styles:[".name[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.card-header[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:8px}.card-content[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.text-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-align:center}.check[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;display:flex;align-items:center;justify-content:center;flex-direction:column}.back[_ngcontent-%COMP%]{--background: #e8e8e8 !important;padding:0}.card-col[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.day[_ngcontent-%COMP%]{font-size:50px;margin:0}.year[_ngcontent-%COMP%]{font-size:25px}.header-day[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:0;display:flex;flex-direction:column;align-items:center}.content-year[_ngcontent-%COMP%]{padding-bottom:0}.icon-center[_ngcontent-%COMP%]{margin-left:0}.airbnb[_ngcontent-%COMP%]{color:#ff385c!important}.header-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;flex-direction:row;align-content:stretch;padding-top:5px}.subtitle-card[_ngcontent-%COMP%], .title-card[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.divider[_ngcontent-%COMP%]{border-top:3px solid #e8e8e8;margin:0}.prices[_ngcontent-%COMP%]{font-family:CerealBold;font-size:17px}.advance[_ngcontent-%COMP%]{color:green}.rest[_ngcontent-%COMP%]{color:red}"]}),i})()}];let M=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.Bz.forChild(v),p.Bz]}),i})(),P=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,c.u5,c.UX,o.Pc,M]}),i})()}}]);